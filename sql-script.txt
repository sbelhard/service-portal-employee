CREATE DATABASE portal_repository;
CREATE SCHEMA portal_storage;

SET SEARCH_PATH = portal_storage;


CREATE TABLE questions
(
    id             BIGSERIAL PRIMARY KEY,
    question TEXT UNIQUE NOT NULL,
);

CREATE TABLE answers
(
    id          BIGSERIAL PRIMARY KEY,
    answer      TEXT NOT NULL,
    question_id BIGINT      NOT NULL REFERENCES questions (id),
    result      VARCHAR(64)
);

CREATE TABLE educations(
id BIGSERIAL PRIMARY KEY,
education VARCHAR UNIQUE NOT NULL
);

CREATE TABLE hobbies(
id BIGSERIAL PRIMARY KEY,
hobbies VARCHAR(128) UNIQUE NOT NULL
);

CREATE TABLE employee(
id BIGSERIAL PRIMARY KEY,
last_name VARCHAR(256) NOT NULL,
first_name VARCHAR(256) NOT NULL,
patronymic VARCHAR(256) NOT NULL,
position VARCHAR(256) NOT NULL,
department_id BIGINT NOT NULL REFERENCES department(id),
birth_day DATE NOT NULL,
number_pass VARCHAR(256) NOT NULL UNIQUE,
telephone VARCHAR(64) NOT NULL UNIQUE,
email VARCHAR(256) NOT NULL UNIQUE,
education_id BIGINT NOT NULL REFERENCES education(id),
training VARCHAR(64) NOT NULL,
date_start_contract DATE NOT NULL,
date_end_contract DATE NOT NULL,
role_id BIGINT NOT NULL REFERENCES role (id),
password VARCHAR(256) NOT NULL
);

CREATE TABLE overall_criteria(
id BIGSERIAL PRIMARY KEY,
overall_criteria VARCHAR(256) UNIQUE NOT NULL
);

CREATE  TABLE criteria(
id BIGSERIAL PRIMARY KET,
criteria VARCHAR(256) UNIQUE NOT NULL,
overall_criteria_id BIGINT NOT NULL REFERENCES overall_criteria (id)
);

CREATE TABLE evaluation(
id BIGSERIAL PRIMARY KEY,
value INT NOT NULL,
date_evaluation DATE NOT NULL,
valuing_user_id BIGINT NOT NULL REFERENCES employee (id),
evaluate_user_id BIGINT NOT NULL REFERENCES employee (id),
overall_criteria_id BIGINT NOT NULL REFERENCES criteria (id)
);

CREATE TABLE rating(
id BIGSERIAL PRIMARY KEY,
rating BIGINT NOT NULL,
employee_id BIGINT NOT NULL UNIQUE REFERENCES employee (id)
);

CREATE TABLE role
(
    id          BIGSERIAL PRIMARY KEY,
    role     VARCHAR(64) UNIQUE
);

CREATE TABLE departaments
(
    id          BIGSERIAL PRIMARY KEY,
   departament     VARCHAR(256) UNIQUE
);

CREATE TABLE employee_hobbies(
id BIGSERIAL PRIMARY KEY,
employee_id BIGINT NOT NULL,
hobbies_id BIGINT NOT NULL
);

CREATE TABLE type_inquiry(
id BIGSERIAL PRIMARY KEY,
type VARCHAR(512) UNIQUE NOT NULL,
);

CREATE TABLE inquiry(
id BIGSERIAL PRIMARY KEY,
date_start_inquiry DATE NOT NULL,
date_end_inquiry DATE NOT NULL,
organization_provided VARCHAR(512) NOT NULL,
type_inquiry_id BIGINT NOT NULL REFERENCES type_inquiry(id),
employee_id BIGINT NOT NULL REFERENCES employee (id)
);

DROP TABLE questions;
DROP TABLE answers;
DROP TABLE criteria;
DROP TABLE evaluation;
DROP TABLE overall_criteria;
DROP TABLE employee;
DROP TABLE rating;
DROP TABLE evaluation;
DROP TABLE employee_hobbies;




INSERT INTO questions
VALUES (1,
        'На что из указанного в вариантах ответа имеет право работающий?');

INSERT INTO questions
VALUES (2,
        'В каком из указанных ниже случаев работающий имеет право отказаться
от выполнения порученной работы?');

INSERT INTO questions
VALUES (3,
        'Имеет ли право работник приступать к работе, в состоянии, связанном с
болезнью, препятствующем выполнению работ?');


INSERT INTO answers
VALUES (1,
        'На рабочее место, соответствующее требованиям по охране труда.',1,'FALSE');

INSERT INTO answers
VALUES (2,
        'На рабочее место, соответствующее требованиям по охране труда.
-На обучение безопасным методам и приемам работы, проведение инструктажа по
вопросам охраны труда.',1,'FALSE');

INSERT INTO answers
VALUES (3,
        'На обучение безопасным методам и приемам работы, проведение инструктажа по
вопросам охраны труда.На рабочее место, соответствующее требованиям по охране труда.
На обеспечение необходимыми средствами индивидуальной защиты, средствами
коллективной защиты, санитарно-бытовыми помещениями, оснащенными
необходимыми устройствами и средствами.',1,'TRUE');

INSERT INTO answers
VALUES (4,
        'В случае, если работа ему не нравится.',2,'FALSE');

INSERT INTO answers
VALUES (5,
        'В случае, если эта работа низкооплачиваемая.',2,'FALSE');

INSERT INTO answers
VALUES (6,
        'В случае возникновения непосредственной опасности для жизни и здоровья его и
окружающих до устранения этой опасности.',2,'TRUE');

INSERT INTO answers
VALUES (7,
        'Имеет.',3,'FALSE');

INSERT INTO answers
VALUES (9,
        'Имеет, если считает, что может выполнять работу.',3,'FALSE');

INSERT INTO answers
VALUES (8,
        'Не имеет.',3,'TRUE');

INSERT INTO questions
VALUES (1,
        'На что из указанного в вариантах ответа имеет право работающий?');

INSERT INTO questions
VALUES (2,
        'В каком из указанных ниже случаев работающий имеет право отказаться
от выполнения порученной работы?');

INSERT INTO questions
VALUES (3,
        'Имеет ли право работник приступать к работе, в состоянии, связанном с
болезнью, препятствующем выполнению работ?');


INSERT INTO answers
VALUES (1, 1,'FALSE',
        'На рабочее место, соответствующее требованиям по охране труда.');

INSERT INTO answers
VALUES (2, 1,'FALSE',
        'На рабочее место, соответствующее требованиям по охране труда.
-На обучение безопасным методам и приемам работы, проведение инструктажа по
вопросам охраны труда.');

INSERT INTO answers
VALUES (3, 1,'TRUE',
        'На обучение безопасным методам и приемам работы, проведение инструктажа по
вопросам охраны труда.На рабочее место, соответствующее требованиям по охране труда.
На обеспечение необходимыми средствами индивидуальной защиты, средствами
коллективной защиты, санитарно-бытовыми помещениями, оснащенными
необходимыми устройствами и средствами.');

INSERT INTO answers
VALUES (4, 2,'FALSE',
        'В случае, если работа ему не нравится.');

INSERT INTO answers
VALUES (5, 2, 'FALSE',
        'В случае, если эта работа низкооплачиваемая.');

INSERT INTO answers
VALUES (6, 2, 'TRUE',
        'В случае возникновения непосредственной опасности для жизни и здоровья его и
окружающих до устранения этой опасности.');

INSERT INTO answers
VALUES (7, 3,'FALSE',
        'Имеет.');

INSERT INTO answers
VALUES (9, 3,'FALSE',
        'Имеет, если считает, что может выполнять работу.');

INSERT INTO answers
VALUES (8, 3,'TRUE',
        'Не имеет.');